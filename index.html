<!DOCTYPE html>
<html lang="en">
	<head>
 		<meta charset="utf-8">
		<title>Harry Potter Project Â· Social Graphs and Interactions 2017</title>
		<link rel="stylesheet" href="style.css">

		<!-- jquery -->
		<script
			src="https://code.jquery.com/jquery-3.2.1.min.js"
			integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
			crossorigin="anonymous"></script>

		<!-- bxslide -->
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/bxslider/4.2.12/jquery.bxslider.css">
		<script src="https://cdn.jsdelivr.net/bxslider/4.2.12/jquery.bxslider.min.js"></script>

		<!-- fixto -->
		<script src="js/fixto.min.js"></script>

		<!-- slick -->
		<!-- <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/jquery.slick/1.8.0/slick.css"/> -->

		<link rel="stylesheet" type="text/css" href="slick/slick-1.8.0/slick/slick.css"/>
		<!-- // Add the new slick-theme.css if you want the default styling -->
		<link rel="stylesheet" type="text/css" href="slick/slick-1.8.0/slick/slick-theme.css"/>
		
		<!-- fancybox -->
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" />
		<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js"></script>

		<!-- <script src="node_modules/jquery-smooth-scroll/jquery.smooth-scroll.min.js"></script> -->
		<script type="text/javascript" src="slick/slick-1.8.0/slick/slick.min.js"></script>
		<!-- <script type="text/javascript" src="//cdn.jsdelivr.net/jquery.slick/1.8.0/slick.min.js"></script> -->
		<script src="js/main.js"></script>
	</head>
	<body>
		<div class="top-bar">
			<div class="top-carousel">
				<div><img src="img/hp1.jpg"></div>
				<div><img src="img/hp2.jpg"></div>
				<!-- <div><img src="img/hp4.jpg"></div> -->
				<div><img src="img/hp5.jpg"></div>
				<!-- <div><img src="img/hp6.jpg"></div> -->
				<div><img src="img/hp7.jpg"></div>
				<div><img src="img/hp8.jpg"></div>
				<div><img src="img/hp9.jpg"></div>
				<div><img src="img/hp10.jpg"></div>
				<!-- <div><img src="img/hp11.jpg"></div> -->
				<div><img src="img/hp12.jpg"></div>
				<div><img src="img/hp13.jpg"></div>
			</div>	
			<div class="overlay"></div>
			<header>
				<h1>Harry Potter Project</h1>
				<h2>Social Graphs</h2>
			</header>
		</div>
		<div class="wrapper">
				<div class="content">
					<div id="sidebar">
						<nav id="sidebar-nav">
							<ul>
								<li class="nav-item"><i class="fa fa-bolt"></i><a href="#introduction">Introduction</a></li>
								<li class="nav-item"><i class="fa fa-bolt"></i><a href="#network-analysis">Network analysis</a>
									<ul>
										<li><a href="#basic-statistics">Basic statistics</a></li>
										<li><a href="#degree-distribution">Degree distribution</a></li>
										<li><a href="#centrality">Centrality</a></li>
										<li><a href="#community-analysis">Community analysis</a></li>
									</ul>
								</li>
								<li class="nav-item"><i class="fa fa-bolt"></i><a href="#nlp-text-mining">NLP and text mining</a>
									<ul>
										<li><a href="#tf-idf-wordclouds">TF-IDF and wordclouds</a>
											<ul>
												<li><a href="#characters">Characters</a></li>
												<li><a href="#movies">Movies</a></li>
												<li><a href="#books">Books</a></li>
											</ul>
										</li>
									</ul>
								</li>
								<li class="nav-item"><i class="fa fa-bolt"></i><a href="#sentiment-analysis">Sentiment analysis</a></li>
								<!-- <li><i class="fa-li fa fa-bolt"></i></li> -->
							</ul>
						</nav>
					</div><!--/sidebar-->
					<div id="main">

						<section>
							
							<h1 id="introduction">Introduction</h1>

							<p>This website was created in order to present the work done during the Final Project of the course <em>02805 Social Graphs and Interactions</em> at the Technical University of Denmark. 
							The Final Project of the course consists of a building a network from a data set chosen by the authors of this website. We choose to analyze the Harry Potter universe and everything about it. The network was created from the text on the Harry Potter Fandom Wikipedia site <a href="http://harrypotter.wikia.com/wiki/Main_Page">here</a>. The Fandom Wikipedia provides a fully structured copy of all their current pages structured into an XML file. The XML file can be downloaded from <a href="http://s3.amazonaws.com/wikia_xml_dumps/h/ha/harrypotter_pages_current.xml.7z">here</a>.</p>
							
							<p>The network is constructed by finding a limited amount of characters and placing these as "nodes" in the network. Then by extracting the text from each characters Wikipedia website and from this identifying how many other nodes a character links to from its own page. If a link to another character is found then a "edge" (connection) between the two characters is created.</p>

							<p>By continously analyzing each characters webpage a network is constructed and basic yet exciting question can be answered; who is the most connected character? Can we find communities between the characters? Which unique words identify each character?</p>

							<p>In the project we also conduct extensive text mining and sentiment analysis of the seven books and eight movie scripts. The structure of the website is setup such that reading from the top to bottom provides a walkthrough of the different analyses performed on the network but the website contains no technical explanation of the procedures, this can be found in the <a href="http://nbviewer.jupyter.org/github/machaerus/socialgraphs/blob/master/Harry_Potter.ipynb">IPython Notebook</a></p>

						</section>
						<section>
							
							<h1 id="network">Network Analysis</h1>

							<p>The downloaded network can be visualized in different ways like seen below. First a visualization where node size and color is based on the degree. The larger the degree of a node the darker the color and the larger the size.</p>
							<figure>
								<img src="img/basic_network.png">
								<figcaption>Basic network where node color and size is based on degree. Larger node size indicate a higher degree.</figcaption>
							</figure>
							<p> In the project we use six different categories to characterize each character. The categories comprise the following; the four housings, muggles and other wizards, where the latter is a rather large group of characters. Formally this feature is called a the node attribute and by having this type of categorization of the nodes in the network it is possible to conduct community analysis which will be shown later. For now, let's just visualize the network structure as above but using a color scheme based on the categories of each node.</p>
							<figure>
								<img src="img/categorized_network.png">
								<figcaption>The network colored by category/node attribute with size based on degree.</figcaption>
							</figure>
							<p> Continuing inline with the thought process of doing community analysis; it is possible to extract the largest fully connected subcomponent of the network and then plotting this in a community structure as seen below. Here with split the categories evenly on a circle and as is seen the group of 'Other wizards' is quite large as mentioned. The largest fully connected component of the network is termed the giant connected component (GCC) in network theory and by having extracted this the foundation of community analysis have been made. The community analysis will hence be performed on this subgraph in later sections. </p>
							<figure>
								<img src="img/grouped_network.png">
								<figcaption>The giant component of the network (largest fully connected subset of the network) grouped by category</figcaption>
							</figure>
							
							<h2 id="basic-statistics">Basic Statistics</h2>

							<p>Now, investigating the basic statistics of the network to get and idea of the structure. The network consists of 1078 nodes, i.e. characters and include 5211 edges, i.e. connections between characters. As seen from the figures above we categorize each character into different categories which are; Gyffindors, Ravenclaws, Slytherins, Hufflepuffs, Muggles and Other Wizards. These "communities" are what we will refer to as node attributes and further analysis of these communities will be carried out later.
							A fast an easy to calculate statistic is the degree distribution, which is basically found by counting the number of connections each node in the network has and then binning the degrees such that a distribution can be visualized.</p>

							<p>Although first, let us just check the top nodes with respect to degree in the network as seen below.</p>

							<figure><img src="img/degree_table.png" alt="Top 10 nodes sorted by degree"></figure>
							
							<p>Furthermore, in network analysis formally a connection can be categorized into either an in- or out-connection which is refered to as the in- and out-degree of a node. This exists as the graphs created are a type of graph refeered to as a directed graph meaning that the links between characters are directed, i.e. one character might link to another but the other character might not link to the first.</p>

							<p>Hence, by splitting the counts of degrees into in- and out-degrees the following two tables can be made: </p>

							<figure>
								<img src="img/in_degree_table.PNG">
								<figcaption>Top 10 nodes sorted by in-degree</figcaption>
							</figure>
							<figure>
								<img src="img/out_degree_table.PNG">
								<figcaption>Top 10 nodes sorted by out-degree</figcaption>
							</figure>
							
							<h2 id="degree-distribution">Degree Distribution</h2>

							<p>From the above analysis of the node degrees, it is possible to visualize the complete degree distribution instead of just showing the top 10 nodes by binning the number of degrees and plotting this.
							Hence, below is the in- and out-degree distribution of the network where both linear axes and log-log axes are used to show the distribution. What is interesting about using the log-log axis is that the distributions approximately form a straight line with some slope meaning that the degree distributions follow a power law.</p>
							<p>This trait is very characteristic for social networks which have been investigated by researchers before and is a consequence of the fact that some nodes tend to have a very large degree and acting as hubs in the network and in this way creating the power law distribution.</p>

							<figure>
								<img src="img/in_out_degree.png">
								<figcaption>In- and out-degree of the the network plotted on linear and log-log axes</figcaption>
							</figure>
							
							<h2 id=centrality>Centrality</h2>
							<p> Centrality of nodes is a measure of how central a node is in a network. Different measures of centrality exists but here we just present two different measures; betweenness and eigenvector centrality. In layman terms the betweenness centrality is a measure of the fraction of how many of the shortest paths through the network that passes through that specific node. The shortest path between two nodes are simply defined as the path that would take you from node a to b in the shortest amount of steps. Hence a high betweenness centrality of a node usually means that the node is well connected as will be seen when computing the centrality measures. Eigenvector centrality is based on a different idea as a high node degree does not necessarily mean that the node has a high eigenvector centrality. The scoring of eigenvector centrality is basically controlled by how influential the node neighbors are in the network and hence if one node has many links to important nodes in the network, then that node has a high eigenvector centrality.</p> 
							
							<p> Now, computing the two centrality measures as seen in the below tables, it is seen that there is quite some correspondance between the two tables although the relative scoring between the two is different. It is quite clear that Harry Potter is the most important character in the network, which was expected as both the degree is high and intuitively one would know that he connects and interacts with a lot of different people in the network. From the betweenness centrality it is seen that some of the nodes with a high score here is not present in the top 10 eigenvector centrality table indicating that these were not connected to important characters in the network but were merely good links for shortest paths in the network. Generally it seems that the main characters of the books and movies have a high eigenvector centrality but this is not necessarily true for the betweenness centrality.</p>
							<figure>
								<img src="img/betweenness_table.PNG">
								<figcaption>Top 10 nodes sorted by betweenness centrality</figcaption>
							</figure>
							<figure>
								<img src="img/eigenvector_centrality.PNG">
								<figcaption>Top 10 nodes sorted by eigenvector centrality</figcaption>
							</figure>
							
							<h2 id="community-analysis">Community Analysis</h2>

								<p> As mentioned the six categories which all nodes of the network was categorized into lay the foundation of some interesting community analysis. The following analysis will be made only on the giant connected component (GCC) which was visualized above. The GCC consists of 865 nodes and 3450 edges and hence includes most of the nodes in the network which had a total of 1078 nodes. In the analysis we make use of a measure called the modularity which gives a score to the current partioning of the network regarding how community like the partioning is. It can be thought of as a way of analyzing potential communities by comparing a potential community to the community that could be formed if randomness was introduced into the same network. If  the modularity is positive the potential community has more links than expected when comparing to a random network. When the modularity is zero then the community links are fully explained by the random variable determining the underlying links (i.e. fully explained by the link distribution which was shown to follow a power law above) and if  the modularity is negative there is less links in the community than when compared to random. Then the overall modularity is the average of the modularities of each community and hence provides a good estimate of the community structure of the partitions. </p>

								<p>The calculated modularity of the current six partitions in the GCC was found to be 0.19 which is rather lower but still shows that the categories provide some community structure. If one was to exclude the whole category called 'Other wizards' and only include the four housings and muggles as categories, then probably the modularity would be higher. The details of the calculation of the modularity of the current partioning can be found in the IPython Notebook. </p>

								<p>It is of interest now to analyze the network with a community analysis algorithm with the goal of finding partitions between nodes such as the modularity is maximized. This can be done by using the implementation of the Louvain algorithm in Python. By using this algorithm 20 different partitions are found and a modularity of 0.48 is obtained. Hence to obtain a larger modularity the algorithm decided to use a lot more partitions than just the 6 found by categorizing as mentioned. It is of interest to visualize how these 20 new partitions compare to the 6 partitions which we term the 'ground truth'. If one of the partitions correspond well to the ground truth partition then this can be visualized from the below network plot. In this plot we plot the 20 communities evenly distributed on the perimeter of a circle and keep the coloring scheme which was based on the categories assigned to the nodes.</p>

								<figure>
									<img src="img/louvain_network.png">
									<figcaption>Visualization of the 20 partitions found by the Louvain algorithm using the original coloring scheme which was based on the 6 categories or the 'ground truth'.</figcaption>
								</figure>		
							
								<p>To investigate the partitions further a so called confusion matrix can be formed. Such a matrix (or table) is constructed such that the original partitions are set as rows and the found Louvain partitions are set as columns. Then by finding intersections between the original communities and the 20 partitions found by the algorithm, it is easily seen if some of the 20 partitions resemble the original partitioning. The confusion matrix is seen below.</p>
										
								<figure>
									<img src="img/confusion_matrix.PNG">
									<figcaption>The confusion matrix created by comparing the original six communities with the 20 communities which was found by the Louvain algorithm.</figcaption>
								</figure>
								
								<p>Taking a look at the confusion matrix, it seems that partition number 7 mostly includes muggles and hence it will be of interest to analyze that specific community. Below we print the list of characters belonging to community number 7. For a person with domain knowledge of the Harry Potter universe it is easily seen why this community is created. The community mostly consist of the Dursleys which is the family which took care of Harry Potter when he was a child and furthermore it consists of Harry's parents and some of their acquitances. Harry's mother was related to Petunia Dursley and hence it is expected that the they are categorized into this community.</p>
												
								<figure>
									<img src="img/partition_7.PNG">
									<figcaption>Characters included in the seventh partition created by the Louvain algorithm.</figcaption>
								</figure>

						</section>
						<section>
							
							<h1 id="nlp-text-mining">Natural language processing and text mining</h1>

							<p>Now, we dwelve into some natural language processing of all the text provided from the Wikipedia sites, the books and the movie scripts. The links to the books and movie scripts are found in the IPython notebook. An immediate interest of is to analyze what words are unique to the most important characters in the network. This can be done by using the term-frequency and inverse document frequency scoring scheme which will be refereed to as the TF-IDF score. This scoring scheme is based on an analysis of a corpus of documents (collection of texts) where first the frequency of a word within a document is found and then the frequency of that word across the corpus of documents is found. In layman terms the TF-IDF score can be understood by considering the limits of the score; if a word is found with a high frequency in a single document and only exist in that document across the corpus of documents, then it attains a maximum TF-IDF score. If another word appears with a high frequency in a document but is present in all other documents of the corpus then it attains a TF-IDF score of zero as the word is not a unique identifier of that specific document. </p>

							<p>By computing the TF-IDF scores the results can be visualized in so called WordClouds where words with a high TF-IDF score is highlighted. We intend to analyze three different corpus of documents in the following sections; Wikipedia texts from the nine most important characters, the seven different books and the eight different movies and from this find the words with the highest TF-IDF score. </p>


							<h2 id="tf-idf-wordclouds">TF-IDF score and WordClouds</h2>

							<h3 id="characters">Analyzing the top nine characters Wikipedia page </h3>

							<p>We extract the nine most important characters based on their total node degree corresponding. These were shown in the above table of total node degree. By tokenizing and cleaning the text from the characters Wikipedia site to create a clean corpus of texts, then the TF-IDF calculation is carried out and the following WordClouds are obtained.</p>

							<div class="slider" id="slider-characters">
								<div><img src="img/Albus Dumbledore_wordcloud.png" title="Albus Dumbledore"></div>
								<div><img src="img/Arthur Weasley_wordcloud.png" title="Arthur Weasley"></div>
								<div><img src="img/Ginevra Weasley_wordcloud.png" title="Ginevra Weasley"></div>
								<div><img src="img/Harry Potter_wordcloud.png" title="Harry Potter"></div>
								<div><img src="img/Hermione Granger_wordcloud.png" title="Hermione Granger"></div>
								<div><img src="img/Molly Weasley_wordcloud.png" title="Molly Weasley"></div>
								<div><img src="img/Ronald Weasley_wordcloud.png" title="Ronald Weasley"></div>
								<div><img src="img/Sirius Black_wordcloud.png" title="Sirius Black"></div>
								<div><img src="img/Tom Riddle_wordcloud.png" title="Tom Riddle"></div>
							</div>
							<p>It is clear that the text was not cleaned completely as the WordClouds consists of non-meaningful words as a consequence of HTML and LaTeX commands which was not completely removed. Although this is the case, the wordclouds still bring some meaningful information and a person with domain knowledge of the Harry Potter universe would easily identify with the scoring of the words for the individual characters. It is fascinating and enlightning how a simple procedure of counting occurences of words across a corpus of documents and then applying a mathematical scoring scheme appropriately enables one to do an analysis of such a large amount of text that actually makes sense and that even might point out the unique identifiers for each character.</p>
							<h3>Analyzing the eigth movie scripts</h3>

							<h3 id="movies">TF-IDF analysis of the movies</h3>
							<p>Now the same procedure is used just this time analyzing the movie scripts. The goal of this analysis is to compare the WordClouds of the movie scripts to the ones created from the books in the next subsection. Hence we concatenate the two movie scripts of the 7'th and 8'th movie into one long document and then calculate a combined WordCloud for these two scripts and compare them to the 7'th book.</p>


							<div class="slider" id="slider-movies">
								<div><img src="img/Movie1_wordcloud.png" title="Harry Potter and the Philosopher's Stone"></div>
								<div><img src="img/Movie2_wordcloud.png" title="Harry Potter and the Chamber of Secrets"></div>
								<div><img src="img/Movie3_wordcloud.png" title="Harry Potter and the Prisoner of Azkaban"></div>
								<div><img src="img/Movie4_wordcloud.png" title="Harry Potter and the Goblet of Fire"></div>
								<div><img src="img/Movie5_wordcloud.png" title="Harry Potter and the Order of the Phoenix"></div>
								<div><img src="img/Movie6_wordcloud.png" title="Harry Potter and the Half Blood Prince"></div>
								<div><img src="img/Movie78_wordcloud.png" title="Harry Potter and the Deathly Hallows"></div>
							</div>

							<h3 id="books">TF-IDF analysis of the books</h3>

							<p>Now calculating the WordClouds for the books as seen below.</p>

							<div class="slider" id="slider-books">
								<div><img src="img/Book1_wordcloud.png" title="Harry Potter and the Philosopher's Stone"></div>
								<div><img src="img/Book2_wordcloud.png" title="Harry Potter and the Chamber of Secrets"></div>
								<div><img src="img/Book3_wordcloud.png" title="Harry Potter and the Prisoner of Azkaban"></div>
								<div><img src="img/Book4_wordcloud.png" title="Harry Potter and the Goblet of Fire"></div>
								<div><img src="img/Book5_wordcloud.png" title="Harry Potter and the Order of the Phoenix"></div>
								<div><img src="img/Book6_wordcloud.png" title="Harry Potter and the Half Blood Prince"></div>
								<div><img src="img/Book7_wordcloud.png" title="Harry Potter and the Deathly Hallows"></div>
							</div>

							<h3>Comparing the WordClouds</h3>

							<p>From the above it is quite clear that the movie scripts are not as cleaned as the text of the books and because of this some non-meaningful words are included in the WordClouds. But by ignoring these it is still clear that the WordClouds of the books compare well to those of the movies, albeit the fact that for the movie scripts it seems that there is more emphasis on the unique persons included in each movie and for the books the WordClouds are focused on the events which describe that book. Hence, this analysis shows that what uniquely identifies the movies are approximately the same as for the books hereby concluding that the overall structure and themes of the movies follow that of the books.</p>

							<h2>Using NLTK to investigate spells </h2>
							<p>We downloaded a list of spells from this <a href="https://www.pojo.com/harry-potter-spell-list/">website</a> with the goal of investigating the development of spell usage throughout the series of books and movies. Furthermore, we will be able to answer exciting question like;  which are the most used spells in each book? How does this compare to the movies? Are all spells in the list used in the book or are most of them made up by movie directors and script writers?</p>

							<p>As a first try we investigate how many times each spell in the list is used throughout the whole series of books and in this way we create a top 10 of the spells used. This list of top 10 spells by usage is seen in the table below. </p>
							<figure>
								<img src="img/top_spells.PNG">
								<figcaption>Top 10 spells sorted by spell usage throughout the series of the seven books.</figcaption>
							</figure>
							<p>Now, having obtained a basis consisting of the 10 most used spells in the books we use this list of spells to investigate the development of those spells throughout each book and movie. The development is seen below for both the books and the movies where the last two movies are concatenated into one. </p>

							<figure>
								<img src="img/book_spells.png">
								<figcaption>Development of top 10 spell usage throughout the book series.</figcaption>
							</figure>
							<figure>
								<img src="img/movie_spells.png">
								<figcaption>Development of top 10 spell usage throughout the movie series.</figcaption>
							</figure>
							<p>From the above it is quite clear that similar patterns exist in the book as in the movies although in the movies it seems that generally the most frequent spells are used less. In correspondence with the books, none of the top 10 spells were used in the first movie and also in the third movie, Expecto Patronum was used a lot. It is clear that in movie 3 the Riddikulus spell was the most often used, where in the book it was the second most used spell. Everyone who has read the third book or watched the third movie will be able to identify with these findings. </p>
							
							<p>It is clear that the death spell Avada Kedavra is used most frequently towards the end of the series and tops in the 7'th book and 7 and 8'th movie. Interestingly it is already mentioned in the fourth book but in the movies it was first used in the fifth movie. If one was to rate the spells with regards to sentiment, an interesting analysis could potentially be conducted and the result would probably be that towards the end of the books the usage of spells with low sentiment increases and from this conclude that the Harry Potter books and movies becomes darker with time! For now we just conclude that the unforgiveable spells are used with high frequency towards the end of the series clearly showing how the dark powers become more prominent towards the end of the series.</p>
							
							<h2>Text Analysis</h2>
							<p>Now, we want to investigate the relashionship between the three main characters Harry, Ron and Hermione and see if we could have predicted whether Harry or Ron would be Hermione's boyfriend. For non Harry Potter fans we can reveal that Ron and Hermione end up as a couple. For that reason, we created a list of lists where each sublist contains the trigrams, a continuous sequence of three words which are next to each other, for each book respectively and then, we counted the occurences of the following trigrams; "Harry and Hermione", "Harry and Ron" and "Ron and Hermione". Finally, we plotted our results.</p>

							<p><figure>
								<img src="img/hermiones_boyfriend.png">
								<figcaption>Barplot showing the relationships between the three main characters.</figcaption>
							</figure></p>
							<p>From the above it is quite clear that already from the third book, the trigram 'Ron and Hermione' was very trending and hence it could be that J. K. Rowling had already planned that Ron and Hermione should have ended up together. Although this might be unclear it is quite clear that Ron and Hermione are mentioned together a lot more than 'Harry and Ron' and 'Harry and Hermione'.</p>

							<p>Next, we are interested on the courses the characters talk about the most in each book. Our approach was similar to the one before. This time we counted the occurences of "Dark Arts" using bigrams and we also counted the occurences of Potions, Transfiguration and Quidditch. Finally, we plotted the results.</p> 
							<p><figure>
								<img src="img/count_courses.png">
								<figcaption>Barplot showing the most popular courses.</figcaption>
							</figure></p>
							<p>From the above it is quite clear that Quidditch is very popular throughout the whole series but seem to drop a lot towards the end and especially in the last book. Remembering that in the last book Hogwarts is under attack by Voldemort and his army this might be expected that a fun activity like Quidditch is less prominent. Furthermore, courses like 'Potions' and 'Defence against the Dark Arts' become more prominent towards the end of the series and from this we conclude that these courses are more advanced courses which are taken by the older students and hence become popular with the aging of Harry Potter and his friends.</p> 
						        
							<h3>Dispersion Plots</h3>
							<p><figure>
								<img src="img/char_book.png">
								<figcaption>Dispersion plot of the main characters for the Harry Potter Books.</figcaption>
							</figure></p>
							<p>From the above it is quite clear that the main characters are mentioned nearly throughout the whole collection of books. Furthermore, it is seen that characters like Slughorn is mentioned very late, which is expected as he was introduced only in the sixth book. Furthermore, it is seen that Voldemort is mentioned more towards the end of the series indicating that people dare to say his name towards the end of the series!</p>
							<p><figure>
								<img src="img/char_mov.png">
								<figcaption>Dispersion plot of the main characters for the Harry Potter Movies.</figcaption>
							</figure></p>
							
							<p>The above observations that were made with regards to the dispersion plot for the books seem to also count for the movies. The main characters are prominent throughout the whole book but it is seen that some of the less prominent characters are mentioned less in the movies than in the books which might be an effect of the streamlining of the movie scripts such that a whole book can fit into a 2 hour film.</p>
					         	<p><figure>
								<img src="img/houses_books.png">
								<figcaption>Dispersion plot of the Hogwards Housings for the Harry Potter Books.</figcaption>
							</figure></p>
							
							<p><figure>
								<img src="img/houses_movies.png">
								<figcaption>Dispersion plot of the Hogwards Housings for the Harry Potter Movies.</figcaption>
							</figure></p>
							<p>From this it is very clear that the most prominent house are the Gryffindor and Sltyherin houses where the Hufflepuff and Ravenclaw houses are not as prominent. This is even more the case when investigating the movie scripts below. Here it is first observed that the names of the houses are mentioned less frequently but it is also seen that Hufflepuff and Ravenclaw is mentioned very few times compared to Gryffindor and Slytherin.</p>
						
						</section>
						<section>
							

							<h1 id="sentiment-analysis">Sentiment analysis</h1>
							<P>Sentiment analysis is the analysis of subjective information and uses natural language processing and text mining to quantify meanings of different pieces of texts or words in such a way that it is possible to tell the feelings behind the words or sentences. The analysis in this section is based on a large dictionary with words and their respective sentiment scoring which was created by the authors behind the article <a href="http://journals.plos.org/plosone/article?id=10.1371/journal.pone.0026752">Temporal Patterns of Happiness and Information in a Global Social Network: Hedonometrics and Twitter</a>. </p>

							<h2>Single word sentiment analysis</h2>
							<p>The goal of this analysis is to provide a characterization of each word used as either; bad, neutral or good by defining thresholds for different sentiment levels and from this obtaining a binned word count for each class throughout each book. In this way we will be able to tell if the usage of words change throughout the series of books and if the books indeed become darker with time as one might think from the analysis of the spells as was seen above. By normalizing the counts of each class in each of the books such that we obtain a percentage of bad, neutral and good words, the bar plot below is obtained. </p>
							<figure>
								<img src="img/word_classification.png">
								<figcaption>Development of word usage throughout the series of books.</figcaption>
							</figure>
							<p>From the above figure it is quite clear that mostly 'Good words' are used in the books followed by 'Bad words' and then few neutral words. The low occurences of 'Neutral words' is a consequence of the thresholds which cause the range of sentiment for the 'Neutral words' to be very small. The definition of thresholds can is further explained in the IPython notebook.</p> 
							<p> Albeit not huge, it is seen that there is a general decrease of 'Good words' throughout the series of books and a general increase of 'Bad words'. The increase is low but relevant. One would expect the increase to be larger but as a consequence of the length of the books this is not seen. As suggested in the analysis of the spells, it would be interestingly to compute sentiment scores for the spells used and then see the development of sentiment only based on the spell usage. This would however require a scoring of all spells used which we chose not to do in this Final Project. </p>
 
							<h2>Plot the sentiment</h2>
							
							<p>In this section some sentiment plots for the Harry Potter books were created. It is quite clear from the plots below, that fluctuations in the average sentiment exist albeit the fluctuations are not large when comparing to the range on the y-axis. Furthermore, it is not possible to directly identify the events of the books corresponding to the changes in the sentiment profiles except if one was to find and analyze the specific region of interest. As this is a tedious process we move on.</p>
							<div class="slider" id="slider-books">
								<div><img src="img/Philosophers_Stone_sentiment_profile.png" title="Harry Potter and the Philosophers Sentiment Profile"></div>
								<div><img src="img/Chamber_of_Secrets_sentiment_profile.png" title="Harry Potter and the Chamber of Secrets Sentiment Profile"></div>
								<div><img src="img/Prisoner_of_Azkaban_sentiment_profile.png" title="Harry Potter and the Prisoner of Azkaban Sentiment Profile"></div>
								<div><img src="img/Goblet_of_Fire_sentiment_profile.png" title="Harry Potter and the Goblet of Fire Sentiment Profile"></div>
								<div><img src="img/Order_of_the_Phoenixsentiment_profile.png" title="Harry Potter and the Order of the Phoenix Sentiment Profile"></div>
								<div><img src="img/Half-Blood_Prince_sentiment_profile.png" title="Harry Potter and the Half Blood Prince Sentiment Profile"></div>
								<div><img src="img/Deathly_Hallowssentiment_profile.png" title="Harry Potter and the Deathly Hallows Sentiment Profile"></div>
							</div>
							
							
							<h2> Comparing books and movies with sentiment analysis </h2>
							

					                <p>The last part of our sentiment analysis is the creation of some color plots based on the calculated sentiments in order to investigate how sentiments are dispersed in each movie comparing to the corresponding book.</p>
                                                        <figure>
								<img src="img/Philosophers_Stone_sentiment_bar_book.png">
								<figcaption>Colorplot for Harry Potter and the Philosophers Stone Book</figcaption>
							</figure>
							<figure>
								<img src="img/Philosophers_Stone_sentiment_bar_movie.png">
								<figcaption>Colorplot for Harry Potter and the Philosophers Stone Movie</figcaption>
							</figure>
							<figure>
								<img src="img/Chamber_of_Secrets_sentiment_bar_book.png">
								<figcaption>Colorplot for Harry Potter and the Chamber of Secrets Book</figcaption>
							</figure>
							<figure>
								<img src="img/Chamber_of_Secrets_sentiment_bar_movie.png">
								<figcaption>Colorplot for Harry Potter and the Chamber of Secrets Movie</figcaption>
							</figure>
							<figure>
								<img src="img/Prisoner_of_Azkaban_sentiment_bar_book.png">
								<figcaption>Colorplot for Harry Potter and the Prisoner of Azkaban Book</figcaption>
							</figure>
							<figure>
								<img src="img/Prisoner_of_Azkaban_sentiment_bar_movie.png">
								<figcaption>Colorplot for Harry Potter and the Prisoner of Azkaban Movie</figcaption>
							</figure>
							<figure>
								<img src="img/Goblet_of_Fire_sentiment_bar_book.png">
								<figcaption>Colorplot for Harry Potter and the Goblet of Fire Book</figcaption>
							</figure>
							<figure>
								<img src="img/Goblet_of_Fire_sentiment_bar_movie.png">
								<figcaption>Colorplot for Harry Potter and the Goblet of Fire Movie</figcaption>
							</figure>
							
							<figure>
								<img src="img/Order_of_the_Phoenixsentiment_bar_book.png">
								<figcaption>Colorplot for Harry Potter and the Order of the Phoenix Book</figcaption>
							</figure>
							<figure>
								<img src="img/Order_of_the_Phoenixsentiment_bar_movie.png">
								<figcaption>Colorplot for Harry Potter and the Order of the Phoenix Movie</figcaption>
							</figure>
							<figure>
								<img src="img/Half-Blood_Prince_sentiment_bar_book.png">
								<figcaption>Colorplot for Harry Potter and the Half-Blood Prince Book</figcaption>
							</figure>
							<figure>
								<img src="img/Half-Blood_Prince_sentiment_bar_movie.png">
								<figcaption>Colorplot for Harry Potter and the Half-Blood Prince Movie </figcaption>
							</figure>
							<figure>
								<img src="img/Deathly_Hallowssentiment_bar_book.png">
								<figcaption>Colorplot for Harry Potter and the Deathly Hallows Book</figcaption>
							</figure>
							<figure>
								<img src="img/Deathly_Hallowssentiment_bar_movie.png">
								<figcaption>Colorplot for Harry Potter and the Deathly Hallows Movie </figcaption>
							</figure>
							<p>From the above it is quite clear that the books and movies differ a lot with respect to their sentiment. A general observation is that in the books the sentiment is more stable than in the movies but overall they seem to match pretty well. As an example it is seen that in the Chamber of secrets books the sentiment is high in the start and lower in the end matching well with the movie script.</p>

						</section>
					</div><!--/main-->
					
				</div><!--/content-->
				<footer id="colophon">
					<p>Project by Athina Tsagkari, Terkel Bo Olsen &amp; Jan Szwagierczak. Last update: 29 Nov 2017</p>
				</footer>
		</div><!--/wrapper-->
	</body>
</html>
